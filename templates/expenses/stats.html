{% extends "base.html" %}
{% load static %}
 {% block content %}


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<div class="container" style="margin-top:7%;">



<div class="row">
    <div class="col-md-10">
        <nav aria-label="breadcrumb">
        <ol class="breadcrumb" style="
                                        background-color: #dddddd;
                                        padding-left:1%;
                                        margin-top:1%; 
                                        padding-top:0.5%;
                                        padding: .75rem 1rem;">
          <li class="breadcrumb-item"><a href="" style="text-decoration:none;">Saved Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Current Month</li>
        </ol>
      </nav>
    </div>
      <div class="col-md-2" style="margin-top:0.9%;">
        <a href="{% url 'export_csv' %}" class="btn btn-primary" style="
        height: 70%;
        width: 90%;
        padding-top: 6%;"
        >Download</a>
      </div>
    </div>
    <div class="container mt-2">
      <h2>Transaction Analysis</h2>
  
      <h3>Weekly Analysis</h3>
      <table class="table table-striped">
          <thead>
              <tr>
                  <th>Category</th>
                  <th>Payment Type</th>
                  <th>Total Amount</th>
              </tr>
          </thead>
          <tbody>
              {% for analysis in weekly_analysis %}
              <tr>
                  <td>{{ analysis.grouped_category  }}</td>
                  <td>{{ analysis.grouped_payment_type  }}</td>
                  <td>{{ analysis.total_amount }}</td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="3">No transactions found for this week.</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  
      <h3>Monthly Analysis</h3>
      <table class="table table-striped">
          <thead>
              <tr>
                  <th>Category</th>
                  <th>Payment Type</th>
                  <th>Total Amount</th>
              </tr>
          </thead>
          <tbody>
              {% for analysis in monthly_analysis %}
              <tr>
                  <td>{{ analysis.grouped_category  }}</td>
                  <td>{{ analysis.grouped_payment_type  }}</td>
                  <td>{{ analysis.total_amount }}</td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="3">No transactions found for this month.</td>
              </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>

</div>
</div>


{% endblock  %}